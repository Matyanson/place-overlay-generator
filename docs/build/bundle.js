var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(t,n){t.appendChild(n)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function s(){return l(" ")}function f(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function d(t){return""===t?null:+t}function p(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function g(t,n){t.value=null==n?"":n}let m;function $(t){m=t}function w(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const y=[],b=[],v=[],x=[],_=Promise.resolve();let E=!1;function k(t){v.push(t)}const j=new Set;let R=0;function I(){const t=m;do{for(;R<y.length;){const t=y[R];R++,$(t),L(t.$$)}for($(null),y.length=0,R=0;b.length;)b.pop()();for(let t=0;t<v.length;t+=1){const n=v[t];j.has(n)||(j.add(n),n())}v.length=0}while(y.length);for(;x.length;)x.pop()();E=!1,j.clear(),$(t)}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const C=new Set;function M(t,n){-1===t.$$.dirty[0]&&(y.push(t),E||(E=!0,_.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(r,a,u,l,s,f,h,d=[-1]){const p=m;$(r);const g=r.$$={fragment:null,ctx:null,props:f,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(p?p.$$.context:[])),callbacks:e(),dirty:d,skip_bound:!1,root:a.target||p.$$.root};h&&h(g.root);let w=!1;if(g.ctx=u?u(r,a.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return g.ctx&&s(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),w&&M(r,t)),n})):[],g.update(),w=!0,o(g.before_update),g.fragment=!!l&&l(g.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);g.fragment&&g.fragment.l(t),t.forEach(c)}else g.fragment&&g.fragment.c();a.intro&&((y=r.$$.fragment)&&y.i&&(C.delete(y),y.i(b))),function(t,e,r,a){const{fragment:c,on_mount:u,on_destroy:l,after_update:s}=t.$$;c&&c.m(e,r),a||k((()=>{const e=u.map(n).filter(i);l?l.push(...e):o(e),t.$$.on_mount=[]})),s.forEach(k)}(r,a.target,a.anchor,a.customElement),I()}var y,b;$(p)}function A(n){let e,i,r,m,$,w,y,b,v,x,_,E,k,j,R,I,L,C,M,P,A,O,B,D,N,S,U,F,T,q,z,G,H,J;return{c(){e=u("main"),i=l("canvas width: "),r=l(n[2]),m=s(),$=u("input"),w=l("\n\tcanvas height: "),y=l(n[3]),b=s(),v=u("input"),x=u("br"),_=l("\n\tx offset: "),E=l(n[4]),k=s(),j=u("input"),R=l("\n\ty offset: "),I=l(n[5]),L=s(),C=u("input"),M=u("br"),P=s(),A=u("button"),A.textContent="load Image",O=u("br"),B=s(),D=u("input"),N=l(" Rows: "),S=l(n[0]),U=s(),F=u("canvas"),T=s(),q=u("button"),q.textContent="generate layout",z=u("br"),G=l("\n\t(if nothing happens)\n\tright click the canvas > save as"),h($,"type","number"),h(v,"type","number"),h(j,"type","number"),h(C,"type","number"),h(D,"type","number"),h(F,"class","svelte-16jpjmj"),h(e,"class","svelte-16jpjmj")},m(t,o){!function(t,n,e){t.insertBefore(n,e||null)}(t,e,o),a(e,i),a(e,r),a(e,m),a(e,$),g($,n[2]),a(e,w),a(e,y),a(e,b),a(e,v),g(v,n[3]),a(e,x),a(e,_),a(e,E),a(e,k),a(e,j),g(j,n[4]),a(e,R),a(e,I),a(e,L),a(e,C),g(C,n[5]),a(e,M),a(e,P),a(e,A),a(e,O),a(e,B),a(e,D),g(D,n[0]),a(e,N),a(e,S),a(e,U),a(e,F),n[13](F),a(e,T),a(e,q),a(e,z),a(e,G),H||(J=[f($,"input",n[8]),f(v,"input",n[9]),f(j,"input",n[10]),f(C,"input",n[11]),f(A,"click",n[6]),f(D,"input",n[12]),f(q,"click",n[7])],H=!0)},p(t,[n]){4&n&&p(r,t[2]),4&n&&d($.value)!==t[2]&&g($,t[2]),8&n&&p(y,t[3]),8&n&&d(v.value)!==t[3]&&g(v,t[3]),16&n&&p(E,t[4]),16&n&&d(j.value)!==t[4]&&g(j,t[4]),32&n&&p(I,t[5]),32&n&&d(C.value)!==t[5]&&g(C,t[5]),1&n&&d(D.value)!==t[0]&&g(D,t[0]),1&n&&p(S,t[0])},i:t,o:t,d(t){t&&c(e),n[13](null),H=!1,o(J)}}}function O(t,n,e){let o,i,r=null,a=20,c=2e3,u=2e3,l=0,s=0;w((async()=>{i=o.getContext("2d")}));const f=async()=>{i&&r&&(await((t,n,e)=>new Promise(((o,i)=>{let r=new Image;r.src=t,r.addEventListener("load",(async function(){const t=r.width/r.height;e.height=e.width/t,n.drawImage(r,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height);o(i)}),!1)})))(r,i,o),(t=>{const n=o.height/t,e=n/2,r=Math.floor(t*(o.width/o.height));for(let o=0;o<t;o++)for(let t=0;t<r;t++)i.fillRect(n*t+e/2,n*o+e/2,e,e)})(a))},h=(t,n,e,o)=>{const i=((t,n,e)=>4*Math.floor(t*e+n))(n,e,o);return[t[i],t[i+1],t[i+2],t[i+3]]};return t.$$.update=()=>{if(1&t.$$.dirty)try{f()}catch(t){}},[a,o,c,u,l,s,async()=>{const t=await((t="text/json")=>new Promise(((n,e)=>{const o=document.createElement("input");o.type="file",o.accept=t,o.onchange=t=>{const e=t.target;n(e.files[0])},o.click()})))("image/*"),n=await(t=>{let n=new FileReader;return new Promise(((e,o)=>{n.onload=()=>{"string"!=typeof n.result?o("data file type is not a string"):e(n.result)},n.readAsDataURL(t)}))})(t);r=n,f()},async()=>{e(1,o.width=2*c,o),e(1,o.height=2*u,o),i.clearRect(0,0,o.width,o.height);const t=Math.floor(a*(o.width/o.height)),n=await((t,n=null,e=null,o=null)=>new Promise(((i,r)=>{let a=new Image;a.src=t,a.addEventListener("load",(async function(){const t=null!=e?e:a.width,r=null!=o?o:a.height;if(null==n){const e=document.createElement("canvas");e.width=t,e.height=r,n=e.getContext("2d")}n.drawImage(a,0,0,t,r);const c=n.getImageData(0,0,t,r);i(c)}),!1)})))(r),f=n.data,d=n.height/a;for(let e=0;e<a;e++)for(let o=0;o<t;o++){const t=Math.round(o*d),r=Math.round(e*d),a=h(f,n.width,t,r),c=2*(l+o),u=2*(s+e);i.fillStyle=`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`,i.fillRect(c,u,1,1)}const p=await(t=>new Promise((n=>{t.toBlob((t=>n(t)))})))(o);((t,n,e)=>{let o=new Blob(n,{type:e}),i=document.createElement("a");i.href=window.URL.createObjectURL(o),i.download=t,i.click()})("layout.png",[p],"image/png")},function(){c=d(this.value),e(2,c)},function(){u=d(this.value),e(3,u)},function(){l=d(this.value),e(4,l)},function(){s=d(this.value),e(5,s)},function(){a=d(this.value),e(0,a)},function(t){b[t?"unshift":"push"]((()=>{o=t,e(1,o)}))}]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),P(this,t,O,A,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
